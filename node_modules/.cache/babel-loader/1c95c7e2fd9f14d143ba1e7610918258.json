{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yueranyu/Code/03Javascript/2022_React_Practice/HappyFamily/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/yueranyu/Code/03Javascript/2022_React_Practice/HappyFamily/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/yueranyu/Code/03Javascript/2022_React_Practice/HappyFamily/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/yueranyu/Code/03Javascript/2022_React_Practice/HappyFamily/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yueranyu/Code/03Javascript/2022_React_Practice/HappyFamily/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/yueranyu/Code/03Javascript/2022_React_Practice/HappyFamily/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yueranyu/Code/03Javascript/2022_React_Practice/HappyFamily/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Switch,Route,Redirect}from'react-router-dom';import{connect}from'react-redux';import{createStructuredSelector}from'reselect';import'./App.css';import Header from'./components/header/header.component';import ShopPage from'./pages/shop/shop.component';import HomePage from\"./pages/homepages/homepage.component\";import ContactPage from\"./pages/contactus/contactUs.component\";import SignInAndSignUpPage from'./pages/sign-in-and-sign-up/sign-in-and-sign-up.component';import CheckoutPage from'./pages/checkout/checkout.component';import{auth,createUserProfileDocument}from'./firebase/firebase.utils';import{setCurrentUser as _setCurrentUser}from'./redux/user/user.actions';import{selectCurrentUser}from'./redux/user/user.selectors';import ScrollToTop from\"./components/scroll-to-top/scroll-to-top\";import Footer from\"./components/footer/footer.component\";import SignUp from\"./components/sign-up/sign-up.component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unsubscribeFromAuth=null;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var setCurrentUser=this.props.setCurrentUser;this.unsubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=5;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapShot){setCurrentUser(_objectSpread({id:snapShot.id},snapShot.data()));});case 5:setCurrentUser(userAuth);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unsubscribeFromAuth();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/_jsx(Route,{path:\"/shop\",component:ShopPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/contactUs\",component:ContactPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/checkout\",component:CheckoutPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signin\",render:function render(){return _this2.props.currentUser?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(SignInAndSignUpPage,{});}}),/*#__PURE__*/_jsx(Route,{eaxct:true,path:\"/signup\",component:SignUp})]}),/*#__PURE__*/_jsx(ScrollToTop,{}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return App;}(React.Component);var mapStateToProps=createStructuredSelector({currentUser:selectCurrentUser});var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/yueranyu/Code/03Javascript/2022_React_Practice/HappyFamily/src/App.js"],"names":["React","Switch","Route","Redirect","connect","createStructuredSelector","Header","ShopPage","HomePage","ContactPage","SignInAndSignUpPage","CheckoutPage","auth","createUserProfileDocument","setCurrentUser","selectCurrentUser","ScrollToTop","Footer","SignUp","App","unsubscribeFromAuth","props","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","currentUser","Component","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Switch, Route, Redirect} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {createStructuredSelector} from 'reselect';\nimport './App.css';\nimport Header from './components/header/header.component';\nimport ShopPage from './pages/shop/shop.component';\nimport HomePage from \"./pages/homepages/homepage.component\";\nimport ContactPage from \"./pages/contactus/contactUs.component\";\nimport SignInAndSignUpPage from './pages/sign-in-and-sign-up/sign-in-and-sign-up.component';\nimport CheckoutPage from './pages/checkout/checkout.component';\nimport {auth, createUserProfileDocument} from './firebase/firebase.utils';\nimport {setCurrentUser} from './redux/user/user.actions';\nimport {selectCurrentUser} from './redux/user/user.selectors';\nimport ScrollToTop from \"./components/scroll-to-top/scroll-to-top\";\nimport Footer from \"./components/footer/footer.component\";\nimport SignUp from \"./components/sign-up/sign-up.component\";\n\nclass App extends React.Component {\n  unsubscribeFromAuth = null;\n\n  componentDidMount() {\n    const {setCurrentUser} = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n        });\n      }\n      setCurrentUser(userAuth);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return (\n      <div>\n        <Header/>\n        <Switch>\n          <Route exact path='/' component={HomePage}/>\n          <Route path='/shop' component={ShopPage}/>\n          <Route exact path='/contactUs' component={ContactPage}/>\n          <Route exact path='/checkout' component={CheckoutPage}/>\n          <Route\n            exact\n            path='/signin'\n            render={() =>\n              this.props.currentUser ? (\n                <Redirect to='/'/>\n              ) : (<SignInAndSignUpPage/>)\n            }\n          />\n          <Route eaxct path='/signup' component={SignUp}/>\n        </Switch>\n        <ScrollToTop/>\n        <Footer/>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n"]},"metadata":{},"sourceType":"module"}